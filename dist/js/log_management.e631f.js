webpackJsonp([20,28,34],{700:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=p(a(14)),n=p(a(7)),i=p(a(12)),o=p(a(9)),u=p(a(8)),s=a(1),r=p(s),d=(a(36),p(a(1045)));function p(e){return e&&e.__esModule?e:{"default":e}}var f=function(e){function t(e){(0,n["default"])(this,t);var a=(0,o["default"])(this,(t.__proto__||(0,l["default"])(t)).call(this,e));return a.state={},a}return(0,u["default"])(t,e),(0,i["default"])(t,[{key:"render",value:function(){return r["default"].createElement(d["default"],null)}}]),t}(s.Component);t["default"]=f},793:function(e,t){},1045:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=v(a(155)),n=v(a(102)),i=v(a(101)),o=v(a(156)),u=v(a(14)),s=v(a(7)),r=v(a(12)),d=v(a(9)),p=v(a(8)),f=a(1),c=v(f),h=v(a(57)),y=v(a(1046));function v(e){return e&&e.__esModule?e:{"default":e}}a(793);var m=10,g=10,_=1,k=function(e){function t(e){(0,s["default"])(this,t);var a=(0,d["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.state={logData:[],type:"",level:"",ip:""},a}return(0,p["default"])(t,e),(0,r["default"])(t,[{key:"componentDidMount",value:function(){this.loadLogData()}},{key:"loadLogData",value:function(){var e=this,t=this.state,a={type:t.type,level:t.level,ip:t.ip,offset:(_-1)*g,limit:g};h["default"].get("/api/v1/sys/logs",{params:a}).then(function(t){m=t.iTotalRecords,e.setState({logData:t.aaData})})["catch"](function(e){})}},{key:"onActionSubmit",value:function(){this.loadLogData()}},{key:"onActionChange",value:function(e,t,a){this.setState({type:e,level:t,ip:a})}},{key:"render",value:function(){var e=this,t={total:m,showSizeChanger:!0,page:_,pageSize:g,onShowSizeChange:function(t,a){_=t,g=a,e.loadLogData()},onChange:function(t){_=t,e.loadLogData()},pageSizeOptions:["10","25","50","100"],showTotal:function(t){return e.state.logData?e.state.logData.length:"0/"+t}},a=this.state,u=a.type,s=a.level,r=a.ip;return c["default"].createElement(l["default"],null,c["default"].createElement(n["default"],{span:24},c["default"].createElement("div",{className:"right-wrapper"},c["default"].createElement(i["default"],{title:"日志表",extra:c["default"].createElement(y["default"],{type:u,level:s,ip:r,onChange:this.onActionChange.bind(this),onSubmit:this.onActionSubmit.bind(this)})},c["default"].createElement("div",{className:"table-wrapper"},c["default"].createElement(o["default"],{columns:[{title:"类型",dataIndex:"log_type",key:"log_type"},{title:"等级",dataIndex:"log_level",key:"log_level"},{title:"操作人",dataIndex:"operator",key:"operator"},{title:"访问时间",dataIndex:"log_time",key:"log_time"},{title:"IP地址",dataIndex:"remote_ip",key:"remote_ip"},{title:"请求URI",dataIndex:"request_uri",key:"request_uri"},{title:"访问模块",dataIndex:"module",key:"module"},{title:"耗时",dataIndex:"consuming",key:"consuming"}],dataSource:this.state.logData,pagination:t,rowKey:"id"}))))))}}]),t}(f.Component);t["default"]=k},1046:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=c(a(14)),n=c(a(7)),i=c(a(12)),o=c(a(9)),u=c(a(8)),s=a(1),r=c(s),d=c(a(757)),p=c(a(756)),f=c(a(57));function c(e){return e&&e.__esModule?e:{"default":e}}var h=function(e){function t(e){(0,n["default"])(this,t);var a=(0,o["default"])(this,(t.__proto__||(0,l["default"])(t)).call(this,e));return a.state={type:"",level:"",ip:"",typeOptions:null,levelOptions:null},a}return(0,u["default"])(t,e),(0,i["default"])(t,[{key:"componentDidMount",value:function(){var e=this;f["default"].get("/api/v1/sys/logs/type-level").then(function(t){var a=t.typeDataList,l=t.levelDataList;a&&"[object Array]"===Object.prototype.toString.call(a)&&l&&"[object Array]"===Object.prototype.toString.call(l)&&e.setState({typeOptions:a.map(function(e){return e.key=e.id,e.value=e.code,e.label=e.name,e}),levelOptions:l.map(function(e){return e.key=e.id,e.value=e.code,e.label=e.name,e})})})["catch"](function(e){})}},{key:"onSubmit",value:function(){var e=this.state,t=e.type,a=e.level,l=e.ip;this.props.onSubmit({type:t,level:a,ip:l})}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,l=t.level,n=t.ip,i=t.typeOptions,o=t.levelOptions,u=this.props.type!==undefined?this.props.type:a,s=this.props.level!==undefined?this.props.level:l,f=this.props.ip!==undefined?this.props.ip:n,c=this.props.onChange?this.props.onChange:function(t,a,l){e.setState({type:t,level:a,ip:l})},h={width:"140px",float:"right",marginLeft:"8px"};return r["default"].createElement("div",{style:{display:"inline",width:"100%"}},r["default"].createElement("span",{style:h},r["default"].createElement("a",{href:"javascript:;",className:"btn",onClick:this.onSubmit.bind(this)},r["default"].createElement("i",{className:"fa fa-search"},"  查找"))),r["default"].createElement("span",{style:h},r["default"].createElement(p["default"],{size:"small",type:"text",value:f,onChange:function(e){c(u,s,e)},placeholder:"请输入ip"}),"  "),r["default"].createElement("span",{style:h},"等级：",r["default"].createElement(d["default"],{size:"small",selectOptions:o,key:"level$item_key",value:o?s:null,onChange:function(e){c(u,e,f)},placeholder:"请选择等级",style:{width:"70%"}})),r["default"].createElement("span",{style:h},r["default"].createElement("label",{style:{float:"left"}},"类型："),r["default"].createElement(d["default"],{size:"small",selectOptions:i,key:"type$item_key",value:i?u:null,onChange:function(e){c(e,s,f)},placeholder:"请选择类型",style:{width:"70%"}})))}}]),t}(s.Component);t["default"]=h}});